<p>ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ:
ì‚¬ìš©ìê°€ HTTP ë°©ì‹ìœ¼ë¡œ ìš”ì²­(GET, POST ë“±) -&gt; Controllerê°€ ì„œë¸”ë¦¿ì„ í†µí•´ì„œ ì‚¬ìš©ìì˜ HTTP Requestë¥¼ ê°ì§€í•¨ -&gt; Serviceì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì²˜ë¦¬ -&gt; Repository(ë˜ëŠ” DBì™€ ê°€ê¹ê¸° ë•Œë¬¸ì— Data Access Objectë¼ ê³ ë„ í•œë‹¤)ì—ì„œ DB íŠ¸ëœì­ì…˜ ì—°ì‚°ê³¼ ê°™ì´ ì´ë£¨ì–´ì§„ë‹¤. </p>
<p>ğŸ’¡ì„œë²„ì—ì„œ HTTP ì‘ë‹µì€ ìœ„ì˜ ìˆœì„œë¥¼ ë°˜ëŒ€ë¡œ í•˜ë©´ ë˜ëŠ”ë°, Controllerì—ì„œ Modelì— ë‹´ì€ ë°ì´í„°ë“¤ê³¼ í•¨ê»˜ ë·° í…œí”Œë¦¿ì„ ë°˜í™˜í•˜ë©´ í™”ë©´ì—ì„œ Modelì— ë‹´ê¸´ ë°ì´í„°ë“¤ì´ ë Œë”ë§ëœë‹¤.</p>
<p>ğŸ”ì›¹ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ìì˜ CRUD ìš”ì²­ì„ ì„œë²„ ë‚´ì—ì„œ íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì—°ì‚°í•´ì„œ ì²˜ë¦¬í•˜ê³ , ê·¸ ì²˜ë¦¬ ê²°ê³¼ë¬¼ì„ HTTP ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì£¼ê¸° ë•Œë¬¸ì— ë¨¼ì € ê°„ë‹¨í•œ CRUD êµ¬í˜„ì„ ê° ê³„ì¸µ ë³„ë¡œ ì‚´í´ë³´ì.</p>
<h1 id="crudë¥¼-ìœ„í•œ-ì§ˆë¬¸-ë‹µë³€-ë¦¬í¬ì§€í† ë¦¬-ìƒì„±">CRUDë¥¼ ìœ„í•œ ì§ˆë¬¸, ë‹µë³€ ë¦¬í¬ì§€í† ë¦¬ ìƒì„±</h1>
<p>ìš°ë¦¬ëŠ” ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì¼ì¼ì´ CRUDë¥¼ êµ¬í˜„í•˜ì§€ ì•Šê³ , ì¶”ìƒí™”ëœ ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•´ì„œ ê°„ë‹¨íˆ ë§Œë“¤ ê²ƒì´ë‹¤.</p>
<p>âš ï¸ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤˜ì•¼í•œë‹¤.</p>
<pre><code class="language-java">public interface QuestionRepository extends JpaRepository&lt;Question, Long&gt; {
}</code></pre>
<ul>
<li><code>JpaRepository&lt;Question, Long&gt;</code>:Question ì—”í‹°í‹°ë¡œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•œë‹¤ëŠ” ì˜ë¯¸ì¸ë°, ì—”í‹°í‹°ì˜ ê¸°ë³¸í‚¤ íƒ€ì…ì„ ì¶”ê°€ë¡œ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤.</li>
</ul>
<pre><code class="language-java">public interface AnswerRepository extends JpaRepository&lt;Answer, Long&gt; {
}</code></pre>
<ul>
<li>AnswerRepositoryë„ ë§ˆì°¬ê°€ì§€ë¡œ ìƒì„±í•´ë‘ì.</li>
</ul>
<h1 id="ì§ˆë¬¸-ëª©ë¡-url-ë§¤í•‘í•˜ê¸°">ì§ˆë¬¸ ëª©ë¡ URL ë§¤í•‘í•˜ê¸°</h1>
<p>ìœ„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ HTTPìš”ì²­ì„ ì„œë²„ê°€ ë°›ê¸° ìœ„í•´ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í•„ìš”í•˜ë‹¤ê³  í•˜ì˜€ë‹¤. ì‚¬ìš©ìì˜ ì§ˆë¬¸ ëª©ë¡ ìš”ì²­ì„ ë°›ê¸° ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ë³´ì.
<code>[íŒŒì¼ëª…: /question/questionController.java]</code></p>
<pre><code class="language-java">@Controller
public class QuestionController {
    @GetMapping(&quot;/question/list&quot;)
    public String list() {
        return &quot;question_list&quot;;
    }
}</code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í”„ë§ì˜ ViewResolverëŠ” ì œì¼ ë¨¼ì € templates ë””ë ‰í† ë¦¬ì—ì„œ question_listë¼ëŠ” ì´ë¦„ì´ ìˆëŠ” í…œí”Œë¦¿ íŒŒì¼ì„ íƒìƒ‰í•œë‹¤. 
ğŸ‘‰question_list.htmlì— ì‘ì„±í•œ h2 í¬ê¸°ì˜ Hello Templateì´ ë¸Œë¼ìš°ì €ì— localhost:8080/question/listë¥¼ ê²€ìƒ‰ì°½ì— ì…ë ¥í•˜ë©´ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ğŸ’¡<code>@Controller</code>ë¥¼ í´ë˜ìŠ¤ ë ˆë²¨ì— ì„ ì–¸í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ í•  ë•Œ ì‹±ê¸€í†¤ìœ¼ë¡œ ë¹ˆì„ ë“±ë¡í•œë‹¤.</p>
<h1 id="ë°ì´í„°ë¥¼-í…œí”Œë¦¿ì—-ì „ë‹¬í•˜ê¸°">ë°ì´í„°ë¥¼ í…œí”Œë¦¿ì— ì „ë‹¬í•˜ê¸°</h1>
<p>DBë¡œë¶€í„° ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  ì €ì¥í•˜ê¸° ìœ„í•œ Model ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ê°ì²´ë¥¼ ì´ìš©í•´ì„œ í…œí”Œë¦¿ì— ë°ì´í„°ë“¤ì„ ì „ë‹¬í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ì•ì—ì„œ ì‘ì„±í•œ QuestionController ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì.</p>
<pre><code class="language-java">@RequiredArgsConstructor
@Controller
public class QuestionController {
    private final QuestionRepository questionRepository;

    @GetMapping(&quot;/question/list&quot;)
    public String list(Model model) {
        List&lt;Question&gt; questionList = questionRepository.findAll();
        model.addAtrribute(&quot;questionList&quot;, questionList);
        return &quot;question_list&quot;;
    }
}</code></pre>
<p>ğŸ”–Model: ìë°” í´ë˜ìŠ¤ì™€ í…œí”Œë¦¿ê°„ì˜ ì—°ê²° ê³ ë¦¬ ì—­í• ì„ í•˜ë©°, ì„ì‹œ ë°ì´í„°ë¥¼ ë‹´ì•„ <strong>í…œí”Œë¦¿ì—ì„œ ê·¸ ê°’ì„ ì‚¬ìš©</strong>í•  ìˆ˜ ìˆë‹¤.
ğŸ’¡ì°¸ê³ ë¡œ Modelê³¼ í´ë¼ì´ì–¸íŠ¸ì˜ HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” <code>@RequestParam</code>ì€ ë‘˜ ë‹¤ í•´ì‹œë§µ&lt;K, V&gt;ë¡œ êµ¬í˜„ë˜ì—ˆëŠ”ë°, ì´ëŠ” í•´ì‹œë§µì´ ê²€ìƒ‰ ë° ì‚½ì…/ì‚­ì œê°€ O(1)ë§Œ ê±¸ë ¤ì„œ ë¹ ë¥¸ ë°ì´í„° ì ‘ê·¼ê³¼ íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ í™œìš©ì„ ìœ„í•´ ìŠ¤í”„ë§ì´ ì„ íƒí•œ ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.</p>
<p>ğŸ“¢íƒ€ì„ë¦¬í”„ì˜ ë¬¸ë²• ë° ìì„¸í•œ ì½”ë“œëŠ” ì†Œí”„íŠ¸ì›¨ì–´ê°€ í…œí”Œë¦¿ ì—”ì§„ì— ì¢…ì†ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‘ì„±í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤!</p>
<h1 id="ì„œë¹„ìŠ¤-ë§Œë“¤ê¸°">ì„œë¹„ìŠ¤ ë§Œë“¤ê¸°</h1>
<pre><code class="language-java">@RequiredArgsConstructor 
@Service
public class QuestionService {
    private final QuestionRepository questionRepository;

    public List&lt;Question&gt; getList() {
        return questionRepository.findAll();
    }
}</code></pre>
<p>ê·¸ë¦¬ê³  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ìœ„ì—ì„œ ë§Œë“  ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì.</p>
<pre><code class="language-java">(... ìƒ ëµ ...) 
public class QuestionController {

    private final QuestionService questionService;

    @GetMapping(&quot;/question/list&quot;) 
    public String list(Model model) { 
        List&lt;Question&gt; questionList = questionService.getList();
        model.addAttribute(&quot;questionList&quot;, questionList);
        return &quot;question_list&quot;;
    }
}</code></pre>
<h1 id="210-ìƒì„¸-í˜ì´ì§€-ë§Œë“¤ê¸°">2â€‘10 ìƒì„¸ í˜ì´ì§€ ë§Œë“¤ê¸°</h1>
<p>ìƒì„¸ í˜ì´ì§€ëŠ” ë³´í†µ ì—”í‹°í‹°ì˜ idë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©ìê°€ ìš”ì²­í•œ idë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ <code>@PathVariable(&quot;key&quot;) T value</code>ë¥¼ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ì— ë„£ëŠ”ë‹¤.</p>
<h3 id="ğŸ’»ì»¨íŠ¸ë¡¤ëŸ¬">ğŸ’»ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<pre><code class="language-java">public class QuestionController {
    // ... ìƒëµ
    @GetMapping(&quot;/question/detail/{id}&quot;)
    public String detail(Model model, @PathVariable(&quot;id&quot;) Long id) {
        Question question = questionService.getQuestion(id);
        model.addAttribute(&quot;question&quot;, question);
        return &quot;question_detail&quot;;
    }
}</code></pre>
<p>ì‚¬ìš©ìì˜ ìƒì„¸ í˜ì´ì§€ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ, ì´ì œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì.</p>
<h3 id="ğŸ’»ì„œë¹„ìŠ¤">ğŸ’»ì„œë¹„ìŠ¤</h3>
<pre><code class="language-java">public class QuestionService {
    // ...ìƒëµ
    public Question getQuestion(Long id) {
        return questionRepository.findById(id).orElseThrow(() -&gt; new DataNotFoundException(&quot;question not found&quot;));
    }</code></pre>
<ul>
<li>íŠ¹ì • ì—”í‹°í‹°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ë•ŒëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§€ê²Œ ë§Œë“¤ì—ˆëŠ”ë°, ì˜ˆì™¸ í´ë˜ìŠ¤ ë ˆë²¨ì—<code>@ResponseStatus(value = HttpStatus_NOT_FOUND, reason = &quot;entity not found&quot;)</code>ë¡œ ë§¤í•‘í•´ì„œ í™”ë©´ì— ìƒíƒœ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ì˜€ë‹¤.</li>
</ul>
<h1 id="211-url-í”„ë¦¬í”½ìŠ¤-ì•Œì•„-ë‘ê¸°">2â€‘11 URL í”„ë¦¬í”½ìŠ¤ ì•Œì•„ ë‘ê¸°</h1>
<p>ì¤‘ë³µë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ í´ë˜ìŠ¤ ë ˆë²¨ì— <code>@RequestMapping(&quot;/question&quot;)</code>ë¥¼ ë§¤í•‘í•¨ìœ¼ë¡œì¨ ë©”ì„œë“œì— ë§¤í•‘ë˜ëŠ” URLì„ ë” ê°„ë‹¨í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<h1 id="212-ë‹µë³€-ê¸°ëŠ¥-ë§Œë“¤ê¸°">2â€‘12 ë‹µë³€ ê¸°ëŠ¥ ë§Œë“¤ê¸°</h1>
<p>ë‹µë³€ ê¸°ëŠ¥ì€ ì•ì„œ ë§Œë“  ì§ˆë¬¸ ìƒì„¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ìê°€ ë‹µë³€ ë“±ë¡ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í…œí”Œë¦¿ì˜ í¼ íƒœê·¸ì—ì„œ POST url ë©”ì„œë“œë¥¼ ë§¤í•‘í•´ì„œ ì„œë²„ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬í•  ê²ƒì´ë‹¤.</p>
<h3 id="ğŸ’»ë‹µë³€-ì»¨íŠ¸ë¡¤ëŸ¬">ğŸ’»ë‹µë³€ ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<pre><code class="language-java">@RequestMapping(&quot;/answer&quot;) 
@RequiredArgsConstructor
@Controller
public class AnswerController {
    private final QuestionService questionService;

    @PostMapping(&quot;/create/{id}&quot;)
    public String createAnswer(Model model, @PathVariable(&quot;id&quot;) Long id, @RequestParam(value = &quot;content&quot; String content) {
    Question question = questionService.getQuestion(id);
    // TODO: ë‹µë³€ì„ ì €ì¥í•œë‹¤.
    return String.format(&quot;redirect:/question/detail/%s&quot;, id);
    }
}</code></pre>
<ul>
<li>ğŸ’¡formì˜ methodê°€ postì´ê¸° ë•Œë¬¸ì— GetMappingì„ ì‚¬ìš©í•˜ë©´ <code>Method Not Allowed 405</code> ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.    </li>
<li>ê·¸ë¦¬ê³  TODO ì£¼ì„ì„ ì‘ì„±í•´ì„œ ì•„ì§ í•´ê²°ë˜ì§€ ì•Šì€ ë¬¸ì œë‚˜ ì¶”ê°€ë¡œ ì‘ì—…í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì„ í‘œì‹œí•˜ì˜€ë‹¤.</li>
</ul>
<h3 id="ğŸ’»ë‹µë³€-ì„œë¹„ìŠ¤">ğŸ’»ë‹µë³€ ì„œë¹„ìŠ¤</h3>
<pre><code class="language-java">@RequiredArgsConstructor
@Service
public class AnswerService {
    private final AnswerRepository answerRepository;

    public void create(Question question, String content) {
        Answer answer = new Answer();
        answer.setContent(content);
        answer.setCreateDate(LocalDateTime.now());
        answer.setQuestion(question);
        answerRepository.save(answer);
    }
}</code></pre>
<ul>
<li>ë‹µë³€ì„ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ë¡œì§ì´ë¼, Answer ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì˜€ê³ , ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ <code>@RequestParam</code>ìœ¼ë¡œ ì‚¬ìš©ìì˜ content í¼ íŒŒë¼ë¯¸í„°ë¥¼ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•˜ì˜€ë‹¤.</li>
<li>ë˜í•œ, ì§ˆë¬¸ ìƒì„¸ í˜ì´ì§€ ì•ˆì—ì„œ ë‹µë³€ì„ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë‹µë³€ê³¼ ê´€ë ¨ëœ ì§ˆë¬¸ ì—”í‹°í‹°ë¥¼ setterë¡œ ì„¤ì •í•˜ì˜€ë‹¤.</li>
</ul>
<p>ğŸ‘‡ì´ì œ ë‹µë³€ ì„œë¹„ìŠ¤ì˜ create ë©”ì„œë“œë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ, ìœ„ì˜ ë‹µë³€ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ TODOë¥¼ ìˆ˜ì •í•´ë³´ì.</p>
<h3 id="ğŸ’»ìˆ˜ì •ëœ-ë‹µë³€-ì»¨íŠ¸ë¡¤ëŸ¬">ğŸ’»ìˆ˜ì •ëœ ë‹µë³€ ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<pre><code class="language-java">@RequestMapping(&quot;/answer&quot;) 
@RequiredArgsConstructor
@Controller
public class AnswerController {
    private final QuestionService questionService;
    private final AnswerService answerService;

    @PostMapping(&quot;/create/{id}&quot;)
    public String createAnswer(Model model, @PathVariable(&quot;id&quot;) Long id, @RequestParam(value = &quot;content&quot; String content) {
    Question question = questionService.getQuestion(id);
    answerService.create(question, content);
    return String.format(&quot;redirect:/question/detail/%s&quot;, id);
    }
}</code></pre>
<h1 id="216-ì§ˆë¬¸-ë“±ë¡-ê¸°ëŠ¥-ì¶”ê°€í•˜ê¸°">2â€‘16 ì§ˆë¬¸ ë“±ë¡ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°</h1>
<p>ì§ˆë¬¸ ë“±ë¡ ë²„íŠ¼ì€ ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€(question_list.html)ì— ì¶”ê°€í•  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì§ˆë¬¸ ë“±ë¡ì„ ìœ„í•œ í¼ì„ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ë¥¼ ë”°ë¡œ ì¶”ê°€í•  ê²ƒì´ë‹¤.</p>
<p>ë¨¼ì € ì‚¬ìš©ìê°€ ì§ˆë¬¸ ë“±ë¡ í¼ì„ GET ìš”ì²­í•˜ê¸° ìœ„í•´ QuestionController ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì.</p>
<h3 id="ğŸ’»questioncontroller">ğŸ’»QuestionController</h3>
<pre><code class="language-java">(... ìƒëµ)
public class QuestionController {
    (... ìƒëµ)
    @GetMapping(&quot;/create&quot;)
    public String showQuestionForm() {
        return &quot;question_form&quot;;
    }
}</code></pre>
<p>ì§ˆë¬¸ ë“±ë¡í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì§ˆë¬¸ ë“±ë¡ í¼ì´ ë‚˜ì˜¤ê³ , ì—¬ê¸°ì„œ ì €ì¥í•˜ê¸°ë¥¼ ëˆ„ë¥´ë©´ ì„œë²„ì—ì„œ ì‚¬ìš©ìê°€ ìš”ì²­í•œ í¼ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ ìœ„ì˜ ì§ˆë¬¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— @PostMapping ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ë³´ì.</p>
<pre><code class="language-java">public class QuestionController {
    (... ìƒëµ)
    @GetMapping(&quot;/create&quot;)
    public String showQuestionForm() {
        return &quot;question_form&quot;;
    }

    @PostMapping(&quot;/create&quot;)
    public String createQuestion(@RequestParam(value = &quot;subject&quot;) String subject, @RequestParam(value = &quot;content&quot;) String content) {
    // TODO: ì§ˆë¬¸ì„ ì €ì¥í•œë‹¤.
    return &quot;redirect:/question/list&quot;; // ì§ˆë¬¸ ì €ì¥ í›„ ì§ˆë¬¸ëª©ë¡ìœ¼ë¡œ ì´ë™ 
    }
}</code></pre>
<p>ğŸ’¡ì±…ì—ì„œëŠ” ë™ì¼í•œ questionCreate ë©”ì„œë“œëª…ì— íŒŒë¼ë¯¸í„°ë§Œ ë‹¬ë¦¬í•˜ëŠ” ì˜¤ë²„ë¡œë”© ë°©ì‹ìœ¼ë¡œ ì‘ì„±í–ˆì§€ë§Œ, ë³¸ì¸ì€ ì§ˆë¬¸ ë“±ë¡ í¼ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•œ ë©”ì„œë“œë¼ëŠ” ê²ƒì„ ì‰½ê²Œ í™•ì¸í•˜ê¸° ìœ„í•´ showQuestionFormìœ¼ë¡œ ë„¤ì´ë°í•˜ì˜€ë‹¤.</p>
<p>ğŸ“¢question_form.htmlì—ì„œ htmlì˜ name ì†ì„±ìœ¼ë¡œ ì‚¬ìš©í•œ subject, contentì™€ @RequestParamì˜ value ê°’ì´ ë™ì¼í•´ì•¼ ì…ë ¥ í•­ëª©ì˜ ê°’ì„ ì œëŒ€ë¡œ ì–»ì„ ìˆ˜ ìˆë‹¤.
ğŸ‘‰ë‚˜ì¤‘ì— í”„ë¡ íŠ¸ì—”ë“œì™€ ì‘ì—…í•  ë•ŒëŠ” ë³€ìˆ˜ê°€ ë™ì¼í•´ì•¼ ê°’ì„ ì œëŒ€ë¡œ ì–»ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìœ ì˜í•˜ì.</p>
<p>ì´ì œ ì§ˆë¬¸ì„ ì €ì¥í•˜ê¸° ìœ„í•œ QuestionServiceì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì.</p>
<h3 id="ğŸ’»questionservice">ğŸ’»QuestionService</h3>
<pre><code class="language-java">(...ìƒëµ)
public class QuestionService {
    (...ìƒëµ)
    public void create(String subject, String content) {
        Question q = new Question();
        q.setSubject(subject);
        q.setContent(content);
        q.setCreateDate(LocalDateTime.now());
        questionRepository.save(q);
    }
}</code></pre>
<p>ë‹µë³€ì„ ìƒì„±í•˜ëŠ” ë¡œì§ê³¼ ë¹„ìŠ·í•˜ê¸° ë•Œë¬¸ì— QuestionControllerì˜ TODOë¥¼ ë§Œë“œëŠ” ë¶€ë¶„ë„ ì‰½ê²Œ ì˜ˆì¸¡í•  ìˆ˜ê°€ ìˆë‹¤.</p>
<h3 id="ğŸ’»ìˆ˜ì •ëœ-questioncontroller">ğŸ’»ìˆ˜ì •ëœ QuestionController</h3>
<pre><code class="language-java">public class QuestionController {
    private final QuestionService questionService;

    (... ìƒëµ)
    @GetMapping(&quot;/create&quot;)
    public String showQuestionForm() {
        return &quot;question_form&quot;;
    }

    @PostMapping(&quot;/create&quot;)
    public String createQuestion(@RequestParam(value = &quot;subject&quot;) String subject, @RequestParam(value = &quot;content&quot;) String content) {
    questionService.create(subject, content);
    return &quot;redirect:/question/list&quot;; // ì§ˆë¬¸ ì €ì¥ í›„ ì§ˆë¬¸ëª©ë¡ìœ¼ë¡œ ì´ë™ 
    }
}</code></pre>
<p>ğŸ“œìš°ë¦¬ëŠ” ì‚¬ìš©ìê°€ í¼ ë‚´ìš©ì„ ì…ë ¥ ì•ˆí–ˆì„ ë•Œì™€ ê°™ì€ í¼ ê²€ì¦ ë¡œì§ë„ ì¶”ê°€ í•´ì•¼í•˜ê¸° ë•Œë¬¸ì—, ìœ„ì—ì„œ ì²˜ë¦¬í•œ subjectì™€ contentëŠ” ë‚˜ì¤‘ì— QuestionForm ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ê²€ì¦ ë¡œì§ê³¼ ë§¤í•‘ë  ê²ƒì´ë‹¤.(ë‹¨, í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ì—”í‹°í‹°ëŠ” ì•„ë‹ˆë¼ëŠ” ê²ƒì— ìœ ì˜í•˜ì.)</p>
<h2 id="í¼-í™œìš©í•˜ê¸°">í¼ í™œìš©í•˜ê¸°</h2>
<p>ğŸ”–í¼ í´ë˜ìŠ¤: ì›¹ í”„ë¡œê·¸ë¨ì—ì„œ <strong>ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°ì´í„°ë¥¼ ê²€ì¦</strong>í•˜ëŠ”ë° ì‚¬ìš©</p>
<p>ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ì„ ê²€ì¦í•˜ëŠ” Validation ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì–´ë…¸í…Œì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ol>
<li>@NotNull: Nullì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ</li>
<li>@NotEmpty: Null ë˜ëŠ” ë¹ˆ ë¬¸ìì—´(&quot;&quot;)ì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ</li>
<li>@NotBlank: Null ë˜ëŠ” ë¹ˆ ë¬¸ìì—´(&quot;&quot;) ë˜ëŠ” ê³µë°±(&quot; &quot;) ëª¨ë‘ í—ˆìš©í•˜ì§€ ì•ŠìŒ</li>
</ol>
<p>ê²€ì¦ ê°•ë„ëŠ” @NotBlank &gt; @NotEmpty &gt; @NotNull ìˆœìœ¼ë¡œ ì—„ê²©í•˜ë‹¤.</p>
<pre><code class="language-java">package com.mysite.sbb.question;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.Size;
import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class QuestionForm {
    @NotBlank(message = &quot;ì œëª©ì€ í•„ìˆ˜í•­ëª©ì…ë‹ˆë‹¤.&quot;)
    @Size(max = 200)
    private String subject;

    @NotBlank(message = &quot;ë‚´ìš©ì€ í•„ìˆ˜í•­ëª©ì…ë‹ˆë‹¤.&quot;)
    private String content;
}</code></pre>
<ul>
<li>ğŸ”–message: ê²€ì¦ì´ ì‹¤íŒ¨í•  ê²½ìš° í™”ë©´ì— í‘œì‹œí•  ì˜¤ë¥˜ ë©”ì‹œì§€</li>
<li>í¼ í´ë˜ìŠ¤ëŠ” ì…ë ¥ í•­ëª©ê³¼ ê°™ì€ í•„ë“œê°’ì„ _ë°”ì¸ë”©_í•´ì„œ(ì—¬ê¸°ì„œëŠ” subject, content) í…œí”Œë¦¿ì˜ í•­ëª©ê³¼ ë§¤í•‘ì´ ëœë‹¤.<ul>
<li>ğŸ”–ë°”ì¸ë”©: í…œí”Œë¦¿ì˜ í•­ëª©ê³¼ form í´ë˜ìŠ¤ì˜ í•„ë“œê°€ ë§¤í•‘ë˜ëŠ” ê³¼ì •</li>
</ul>
</li>
</ul>
<p>ì´ì œ í¼ ê²€ì¦ì„ ìœ„í•´ ìƒì„±í•œ í¼ í´ë˜ìŠ¤ë¥¼ QuestionControllerì— ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì.</p>
<h3 id="ğŸ’»questioncontroller-1">ğŸ’»QuestionController</h3>
<pre><code class="language-java">(...ìƒëµ)
public class QuestionController {
    (...ìƒëµ)
    private final FieldErrorHandler fieldErrorHandler;

    @PostMapping(&quot;/create&quot;)
    public String createQuestion(@Valid QuestionForm questionForm, BindingResult bindingResult) {
        // í¼ ê²€ì¦
        String resultPage = fieldErrorHandler.handleError(bindingResult, &quot;question_form&quot;);
        if (resultPage != null) {
            return resultPage;
        }

     questionService.create(questionForm.getSubject(), questionForm.getContent());
     return &quot;redirect:/question/list&quot;; // ì§ˆë¬¸ ì €ì¥ í›„ ì§ˆë¬¸ëª©ë¡ìœ¼ë¡œ ì´ë™
    }
}</code></pre>
<ul>
<li>QuestionFormì˜ subject, contentì™€ ê°™ì´ ì†ì„±ì˜ ì´ë¦„ì´ ë™ì¼í•˜ë©´ í•¨ê»˜ ì—°ê²°ë˜ì–´ ë¬¶ì´ëŠ” í¼ì˜ ë°”ì¸ë”© ê¸°ëŠ¥ì„ í™œìš©í•˜ì˜€ë‹¤.</li>
<li>QuestionForm í•„ë“œì— ë§¤í•‘í•œ @NotBlank, @Sizeë¡œ ì„¤ì •í•œ ê²€ì¦ ê¸°ëŠ¥ì´ <code>@Valid</code>ë¡œ ë™ì‘í•œë‹¤.</li>
<li>í¼ ê²€ì¦ ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ê°ì§€ë˜ë©´ resultpageë¥¼ ë¦¬í„´í•´ì„œ ê¸°ë³¸ ë·°ë¥¼ ë°˜í™˜í•˜ê²Œ í•˜ì˜€ë‹¤.<ul>
<li>ë§Œì•½ ì–´ë– í•œ ì—ëŸ¬ë„ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´, nullì„ ë¦¬í„´í•´ì„œ ì•„ë˜ì˜ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‹¤í–‰í•˜ê²Œ í•˜ì˜€ë‹¤.</li>
</ul>
</li>
</ul>
<p>ğŸ“¢í•­ìƒ <strong>@Valid ë§¤ê°œë³€ìˆ˜ ë°”ë¡œ ë’¤ì— BindingResult ë§¤ê°œë³€ìˆ˜ê°€ ìœ„ì¹˜</strong>í•´ì•¼ í•œë‹¤. ìƒì‹ì ìœ¼ë¡œ, ì‚¬ìš©ìì˜ í¼ì„ ê²€ì¦í•œ ë‹¤ìŒì— ì—ëŸ¬ê°€ ë°œìƒí•´ì„œ BindingResultë¡œ ì—ëŸ¬ë¥¼ ë°”ì¸ë”©í•œ ë‹¤ìŒ í™”ë©´ì— í‘œì‹œí•˜ëŠ” ê³¼ì •ì´ ë§ê¸° ë•Œë¬¸ì´ë‹¤.</p>
<p>ğŸ’¡í¼ ê²€ì¦í•˜ëŠ” ì—ëŸ¬ ë¡œì§ì´ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ì•„ì˜ˆ í•¸ë“¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë”°ë¡œ ìƒì„±í•˜ì˜€ë‹¤.</p>
<h3 id="ğŸ“œfielderrorhandler">ğŸ“œFieldErrorHandler</h3>
<pre><code class="language-java">package com.mysite.sbb.common;

import org.springframework.validation.BindingResult;

public interface FieldErrorHandler {
    String handleError(BindingResult bindingResult, String defaultView);
}</code></pre>
<p>ê·¸ë¦¬ê³  êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ìœ„ì˜ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì˜€ë‹¤.</p>
<h3 id="ğŸ’»questionformerrorhandler">ğŸ’»QuestionFormErrorHandler</h3>
<pre><code class="language-java">package com.mysite.sbb.common;

import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Component;
import org.springframework.validation.BindingResult;

@Component
@Slf4j
public class QuestionFormErrorHandler implements FieldErrorHandler {
    @Override
    public String handleError(BindingResult bindingResult, String defaultView) {
        if (!bindingResult.hasErrors()) {
            return null; // ì—ëŸ¬ê°€ ì—†ìœ¼ë©´ null ë°˜í™˜
        }

        if (bindingResult.hasFieldErrors(&quot;subject&quot;) &amp;&amp; bindingResult.hasFieldErrors(&quot;content&quot;)) {
            bindingResult.reject(&quot;bothFieldsEmpty&quot;, &quot;ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.&quot;);
            log.error(&quot;ì œëª©ê³¼ ë‚´ìš© ëª¨ë‘ ì…ë ¥ë˜ì§€ ì•ŠìŒ: {}&quot;, bindingResult.getGlobalErrors());
        } else {
            log.error(&quot;í¼ ê²€ì¦ ì˜¤ë¥˜ ë°œìƒ: {}&quot;, bindingResult.getAllErrors());
        }

        return defaultView; // ì—ëŸ¬ê°€ ìˆìœ¼ë©´ ê¸°ë³¸ ë·° ë°˜í™˜
    }
}</code></pre>
<ul>
<li>ì‚¬ìš©ìê°€ ì§ˆë¬¸ ë“±ë¡ í¼ì—ì„œ ì œëª©ê³¼ ë‚´ìš© ë‘˜ ë‹¤ ì…ë ¥í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° GlobalErrorsë¥¼ ì¡°íšŒí•´ì„œ í…œí”Œë¦¿ìœ¼ë¡œ &quot;ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.&quot;ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°”ì¸ë”©í•´ì„œ í‘œì‹œí•˜ë„ë¡ í•˜ì˜€ê³ , ê·¸ë ‡ì§€ ì•Šì„ ê²½ìš° íƒ€ì„ë¦¬í”„ each ë¬¸ë²•ì„ ì‚¬ìš©í•´ì„œ fieldErrorë¥¼ í‘œì‹œí•˜ê²Œ í•˜ì˜€ë‹¤.</li>
</ul>
<p>ğŸ”ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ê¸° ìœ„í•´ <em>th:object</em> ë¬¸ë²•ì„ í…œí”Œë¦¿ íŒŒì¼ì—ì„œ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— question_form.html íŒŒì¼ì€ QuestionForm ê°ì²´ê°€ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ GetMappingì— ë§¤í•‘ëœ showQuestionForm ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ì—ë„ QuestionFormì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>
<p>ğŸ”–th:object: <code>&lt;form&gt;</code>ì˜ ì…ë ¥ í•­ëª©ë“¤ì´ QuesitonFormê³¼ ì—°ê²°ëœë‹¤ëŠ” ì ì„ íƒ€ì„ë¦¬í”„ì— ì•Œë ¤ì£¼ëŠ” ì—­í• </p>
<pre><code class="language-java">    @GetMapping(&quot;/create&quot;)
    public String showQuestionForm(QuestionForm questionForm) {
        return &quot;question_form&quot;;
    }</code></pre>
<p>ğŸ“¢sonarCubeì—ì„œëŠ” questionForm ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ìˆ˜ì •í•˜ë¼ê³  ì œì•ˆí•˜ì§€ë§Œ, ì–˜ë¥¼ ì œê±°í•˜ë©´ íƒ€ì„ë¦¬í”„ì—ì„œ resolving ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ìˆ˜ì • ì œì•ˆì„ ë¬´ì‹œí•˜ì.</p>
<p>ğŸ’¡QuestionFormê³¼ ê°™ì´ <strong>ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ì¸ë”©í•œ ê°ì²´ëŠ” Model ê°ì²´ë¡œ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„</strong> í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<p>âœ‚ë‹µë³€ ë“±ë¡ ê¸°ëŠ¥ì— í¼ ì ìš©í•˜ëŠ” ë‚´ìš©ì€ ì§ˆë¬¸ ë“±ë¡ ê¸°ëŠ¥ì— í¼ ì ìš©í•œ ë¡œì§ê³¼ ë¹„ìŠ·í•˜ê¸° ë•Œë¬¸ì— ìƒëµí•˜ì˜€ë‹¤.</p>